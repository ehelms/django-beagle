{% extends "djbeagle/base.html" %}
{% block content %}
  <div class="container">
    <header>
      <div class="row-fluid">
        <h1 class="span8">{{ search.name }}</h1>
        <h5 class="pull-right">{{ search.date }}</h5>
      </div>
      <div class="row-fluid">
        <h3>Total Articles Found: {{ search.articles.count }}</h3>
      </div>
      <div class="row-fluid">
        <h4 class="span12">Search Criteria</h4>
        <ul class="span12">
          {% for criteria in search.criteria.all %}
            <li>{{ criteria.search_string }}</li>
          {% endfor %}
        </ul>
      </div>
      <div class="row-fluid">
        <h4 class="span12">Search Engines Used</h4>
        <ul class="span12">
          {% for engine in search.engines.all %}
            <li>{{ engine.name }}</li>
          {% endfor %}
        </ul>
      </div>
    </header>
    <div class="accordion">
      <div class="accordion-group">
        {% for engine in search.engines.all %}
        <div class="accordion-heading">
          <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse-{{ engine.name }}">{{ engine.name }}</a>
        </div>
        <div class="accordion-body collapse in" id="collapse-{{ engine.name }}" >
          <div class="accordion-inner">
            <table class="table">
                <thead>
                    <th>Year</th>
                    <th>Title</th>
                    <th>Authors</th>
                    <th>Search Engine</th>
                    <th>Link</th>
                </thead>
                <tbody>
                {% for article in search.articles.all %}
                  <tr>
                    <td>{{ article.title }}</td>
                    <td>{{ article.year }}</td>
                    <td>{{ article.authors }}</td>
                    <td class="span2">{{ article.engine }}</td>
                    <td class="span2"><a href="{{ article.link }}">Go To Article</a></td>
                  </tr>
                {% endfor %}
                </tbody>
            </table>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock content %}
