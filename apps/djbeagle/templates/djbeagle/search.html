{% extends "djbeagle/base.html" %}
{% block content %}
  <div class="container">
    <header>
      <div class="row-fluid">
        <h1 class="span8">{{ search.name }}</h1>
        <h5 class="pull-right">{{ search.date }}</h5>
      </div>
      <div class="row-fluid">
        <h4>Total Articles Found: {{ search.articles.count }}</h4>
      </div>
      <div class="row-fluid">
        <div class="span6">
          <h5 class="span12">Search Criteria</h5>
          <ul class="span12 offset1">
            {% for criteria in search.criteria.all %}
              <li>{{ criteria.search_string }}</li>
            {% endfor %}
          </ul>
        </div>
        <div class="span6">
          <h5 class="span12">Search Engines Used</h5>
          <ul class="span12 offset1">
            {% for engine in search.engines.all %}
              <li>{{ engine.name }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </header>
    <div class="accordion" id="engines">
      {% for engine in search.engines.all %}
      <div class="accordion-group">
        <div class="accordion-heading">
          <a class="accordion-toggle" data-toggle="collapse" data-parent="#engines" href="#collapse-{{ engine.id }}">{{ engine.name }}</a>
        </div>
        <div class="accordion-body collapse" id="collapse-{{ engine.id }}">
          <div class="accordion-inner">
            <table class="table">
                <thead>
                    <th>Year</th>
                    <th>Title</th>
                    <th>Authors</th>
                    <th>Search Engine</th>
                    <th>Link</th>
                </thead>
                <tbody>
                {% for article in search.articles.all %}
                  {% if article.engine.name == engine.name %}
                  <tr>
                    <td>{{ article.title }}</td>
                    <td>{{ article.year }}</td>
                    <td>{{ article.authors }}</td>
                    <td class="span2">{{ article.engine.name }}</td>
                    <td class="span2"><a href="{{ article.link }}">Go To Article</a></td>
                  </tr>
                  {% endif %}
                {% endfor %}
                </tbody>
            </table>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
{% endblock content %}
